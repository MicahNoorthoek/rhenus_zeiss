
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>

<div class="jumbotron login-bg-container" data-controller="sessions">
 <!-- <h1 class="display-4"></h1>-->
  <div class="d-flex justify-content-center flex-row mb-3">
    <div class = 'ieformatting'>
      <div class = "row login-fg-container">

        <div class = "col-lg-4 login-ls"> <!-- left side of login page -->
          <div class = "welcome" style="text-shadow: none;">
            SMPLFTZ
          </div>
          <div class ="details" style="text-shadow: none;">
            Create User
          </div>
        </div>

        <div class="col-sm" id="parent" style = "background-color: #edeeeb"> <!-- the side of the login page for entering login information(right side) -->
        <!--<br><br><br><br><br><br><br>-->
          
          <div class="d-flex p-2 newuser-fg-rs col-12">
            <% if 1==1 %> <!-- @login_block == false-->
              <!-- Right Column: Login Form -->

                <div class="col-xxl-8" style="padding-top: 110px;">
                    <div class="login-input p-5 bg-body-tertiary rounded-4">
                      <% curauth = SelectedAuthorization.pluck(:selected_authorization) %>
                      <% if curauth == [false] %>
                        <div class="d-flex p-0 justify-content-center notauth">
                          <h2 class="fw-bold login-text">Unathorized New User</h2>
                        </div>
                        <div class="d-flex p-0 justify-content-center notauth">
                          <h2 class="card-text-newuser login-text">If you believe you are seeing this message in error - Please contact support.</h2>
                        </div>
                        
                      <% else %>
                        <div class="d-flex p-2 justify-content-center">
                          <h2 class="fw-bold login-text">New User</h2>
                        </div>
                          <%= form_for(@user, :html => {class: "form-horizontal", role: "form"}) do |f| %>
                            <div class="row">

                              <div class="col">
                                <div class="d-flex p-2 justify-content-center">
                                  <div class="form-group login-username d-flex justify-content-center">
                                    <div class="input-group mb-3">
                                      <span class="input-group-text"><i class="fa-regular fa-building"></i></span>
                                      <%# @form300refdata = Form300referencedata.where(firmscode: session[:firmscode]).all %>
                                      <%# company = @form300refdata.pluck(:companyname) %>
                                      <%# if company == [] %>
                                        <%= f.text_field :company, class: "form-control", placeholder: "Enter Company", autofocus: true  %>
                                      <%# else %>
                                        <%#= f.text_field :company, class: "form-control", value: company  %>
                                      <%# end %>         
                                    </div>
                                  </div>
                                </div>

                                <div class="d-flex p-2 justify-content-center">
                                  <div class="form-group login-username d-flex justify-content-center">
                                    <div class="input-group mb-3">
                                      <span class="input-group-text"><i class="fa-regular fa-user"></i></span>
                                      <%= f.text_field :username, class: "form-control", placeholder: "Enter Username", autofocus: true %>           
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="col">
                                <div class="d-flex p-2 justify-content-center">
                                  <div class="form-group login-username d-flex justify-content-center">
                                    <div class="input-group mb-3">
                                      <span class="input-group-text"><i class="fa-regular fa-envelope"></i></span>
                                      <%= f.email_field :email, class: "form-control", placeholder: "Enter Email", autofocus: true %>           
                                    </div>
                                  </div>
                                </div>
                                
                                <div class="d-flex p-2 justify-content-center">
                                  <div class="form-group login-password">
                                    <div class="input-group mb-3">
                                      <span class="input-group-text"><i class="fa-solid fa-key"></i></span>
                                      <%= f.password_field :password, class: "form-control", placeholder: "Enter Password", autocomplete: "off" %>   
                                    </div>
                                  </div>
                                </div>
                              </div>
                              
                              <div class="d-flex justify-content-center">
                                <div class=" col-5 newuser-submit-btn">
                                  <%= f.submit "Create Account", class: 'btn btn-outline-success' %>
                                </div>
                              </div>  

                            </div>
                          <% end %>
                      <% end %>

            <% else %>
              <div class="col-8" style="padding-top: 60px;">
                <h4> SMPLFTZ is currently undergoing maintenance. We will be back online soon. </h4>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>







