<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<!DOCTYPE html>
<html>
  <head>

    <style>
     .searchform {
        width: 30%;
      }

     .form-control:focus {
        border-color: #979796;
        box-shadow: none;
        radius: 0;
      }

     .linktext{
        color: #404040;
        border: none;
        background-color: none;
      }

      .aBitOfSpace {
        margin-top: 10px;
      }
    
    </style>
 <div class="container-fluid justify-content-center" style="">
  <h6 class="pghead2" style="font-size: 18px; margin-bottom: 40px;">href="<%= dashboard_path %>">Home</a> <a style="color:#0061e0; font-style:italic;" href="<%= admin_path %>">Admin</a> > Manage Users</h6>
  <div class="content-squish-users-sp">
    <div class="row">
      <%= search_form_for @u, as: :users, url: zeiss_users_path do |f| %>
        <div class="row">
          
          <div class="col-5 padding-adjust">
            <div class="input-group">
              <%= f.text_field :username_cont, class: "form-control input-sm", placeholder: "Search username..." %>
              <div class="input-group-btn">
                <button class="btn btn-default"
                        style="height: 30px; background-color: #c7d785;"
                        type="submit">
                  <i class="fa-solid fa-magnifying-glass"></i>
                </button>
              </div>
            </div>
          </div>

      
          <div class="col-3">
            <%= link_to "Clear Search", zeiss_users_path, class:"cancel-button btn btn-light btn-sm btn-search" %>
          </div>

       
          <div class="col-3">
            <div class="dropdown">
              <button class="btn dropdown-toggle btn btn-light btn-sm btn-format"
                      type="button"
                      id="dropdownMenuButton"
                      data-bs-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false">
                User Actions
              </button>

              <div class="dropdown-menu"
                   style="background-color:#ffffff; margin-top:5px; width:175px; text-align:center;"
                   aria-labelledby="dropdownMenuButton">

                <% curauth = SelectedAuthorization.pluck(:selected_authorization) %>

                <div style="width:auto;">
                  
                </div>

                <%= link_to "Add New User", verify_user_path, method: :get, data: { turbo_frame: "verify_user_modal" }, class: "btn btn-light btn-sm btn-format", style: "margin: 5px; width:150px;" %>
              </div>
            </div>
          </div>

        </div>
      <% end %>

    </div>
    <div class="table-responsive resptbl-class">
  <table id="ftztable" class="table table-striped table-sm table-hover display responsive no-wrap">
    <thead class="thead-dark">
      <tr>
        <th></th> <!-- Edit icon column -->
        <th>Username</th>
        <th>Email</th>
        <th>Company</th>
        <th>Is Admin</th>
      </tr>
    </thead>

    <tbody id="myTable">
      <% @users.each do |user| %>
        <tr>

       
          <td class="pad-tr">
            <%= link_to edit_user_path(user), data: { turbo_frame: "edit_user_modal" }, class: "icon-edit" do %><i class="fa fa-pencil-alt fa-sm center" aria-hidden="true"></i>
            <% end %>
          </td>

          <td class="pad-tr"><%= user.username %></td>

         
          <td class="pad-tr"><%= user.email %></td>

        
          <td class="pad-tr"><%= user.company %></td>

       
          <td class="pad-tr"><%= user.admin? ? 'true' : 'false' %></td>
          
      <% end %>
    </tbody>
  </table>
</div>


  </div>
<turbo-frame id="verify_user_modal"></turbo-frame>
<turbo-frame id="edit_user_modal"></turbo-frame>
